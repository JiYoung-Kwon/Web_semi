<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
	PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
	"http://mybatis.org/dtd/mybatis-3-mapper.dtd">
	
<mapper namespace="boardGame">		
	<select id = 'totList' parameterType ='kjy.board.Page' resultType = 'Integer'>
		SELECT count(bName) totList FROM boardGame
		WHERE (bName LIKE '%${findStr}%' 
		OR eName LIKE '%${findStr}%')
		
		<if test="store != null">
			AND store = '${store}'
		</if>
		
		<if test="genre != null">
			AND genre = '${genre}'
		</if>
	
	</select>
	
	
	<!-- 조회 -->
	<select id = 'search' parameterType = "kjy.board.Page" resultType = "kjy.board.BoardGameVo">
		SELECT * FROM(		
			SELECT rownum rno, m.* from(
				SELECT * FROM boardGame 
				WHERE (bName LIKE '%${findStr}%' 
				OR eName LIKE '%${findStr}%')
				<if test="store != null">
					AND store = '${store}'
				</if>
				
				<if test="genre != null">
					AND genre = '${genre}'
				</if>)m
		) WHERE rno BETWEEN ${startNo} AND ${endNo}
	</select>
	
	<select id = 'detail' parameterType = "String" resultType = "kjy.board.BoardGameVo">
		SELECT * FROM boardGame
		WHERE bName = #{_parameter}
	</select>
	
	<!-- 입력 -->
	<insert id = 'insert' parameterType = "kjy.board.BoardGameVo">
		INSERT INTO BOARDGAME (bName, eName, expl, diff, minPerson, maxPerson, minTime, maxTime, store, genre, oriAtt, sysAtt) 
		values('${bName}', '${eName}', '${expl}', '${diff}', ${minPerson}, ${maxPerson}, ${minTime}, ${maxTime}, '${store}', '${genre}', '0', '0')
	</insert>

</mapper>
